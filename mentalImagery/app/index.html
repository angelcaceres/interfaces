<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Estimulación: Imagineria Mental</title>


    <link rel="stylesheet" href="styles/mentalImgStyle.css">

    <!-- CSS only -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<!-- JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
</head>

<body style="background-color:grey;">
  <div class="container">
    <div class="form-group">
      <label for="nombre" id="name">Nombre</label>
      <input type="text" class="form-control" id="name" placeholder="Montserrat">
    
    <button type="button" onclick="start('adjustement')" id="startAdjustement" class="btn btn-primary">Iniciar ajuste del modelo</button>
    <button type="button" onclick="start('perception')" id="startPerception" class="btn btn-success">Iniciar percepción</nav></button>
    <button type="button" onclick="imagery()" id="startImagery" class="btn btn-info">Iniciar imaginería mental</button>
    <img id="flip" class="flip" src="">
    <div class="center" id="text"></div>
    </div>
  </div>

<script>

var labelDataFile = "id_del_sujeto_label.dat";
var signalDataFile = "id_del_sujeto_signal.dat";
var bffLabels = "";
var bffSignal = "";

var images = [
    { id: 0, img: 'resources/mentalImg/img/carretera.jpeg',text:'000'},
    { id: 1, img: 'resources/mentalImg/img/ciudad.jpg',text:'000' },
    { id: 2, img: 'resources/mentalImg/img/construccion.jpeg',text:'000'},
    { id: 3, img: 'resources/mentalImg/img/fabrica.jpg',text:'000'},
    { id: 4, img: 'resources/mentalImg/img/terreno.jpg',text:'000'},
];

var objects = [
    { id: 0, img: 'resources/mentalImg/img/cereal.jpg', text:'crl'},
    { id: 1, img: 'resources/mentalImg/img/cocacola.jpg', text:'coca'},
    { id: 2, img: 'resources/mentalImg/img/galletas.jpg', text:'gllt'},
    { id: 3, img: 'resources/mentalImg/img/pastillas.jpg',text:'mdcn'},
    { id: 4, img: 'resources/mentalImg/img/telefono.jpg', text:'tlfn'},

];

var text = $('#text');
var flip = $('#flip'); 
function start(identifier) {
var name = document.getElementById("name").value;

var current = 0;
var array = [];

if(identifier == 'adjustement'){
array = images;
}else {
array = objects;
}

const interval = setInterval(function(){
main(current);
if(current<array.length-1){
current ++
}else{
clearInterval(interval);
}
},7000);
const timer = (ms) => new Promise(resolve => setTimeout(resolve, ms));

async function main(i)
{
text.text('.');
prerun();
await timer(4000);
preseq();
flip.attr('src', array[i].img);
flip.show();

await timer(1600);
postseq();
flip.hide();
flip.attr('src', '');
text.text(array[i].text);

await timer(600);
text.text('');
}
}

function imagery() {
var name = document.getElementById("name").value;

var current = 0;
const interval = setInterval(function(){
main(current);
if(current<objects.length-1){
current ++
}else{
clearInterval(interval);
}
},7000);
const timer = (ms) => new Promise(resolve => setTimeout(resolve, ms));

async function main(i)
{
flip.hide();
text.text('');
await timer(4000);
text.text('.');
await timer(1600);
flip.attr('src', '');

text.text(objects[i].text);

await timer(600);

text.text('');
}

}


</script>
</body>

</html>