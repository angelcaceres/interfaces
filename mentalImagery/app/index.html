<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Estimulación: Imagineria Mental</title>


  <link rel="stylesheet" href="styles/mentalImgStyle.css">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="styles/bootstrap.min.css" />

  <!-- Bootstrap Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script>if (window.module) module = window.module;</script>
</head>

<body style="background-color:grey;">
  <div class="container">
    <div class="form-group">
      <label for="nombre" id="name">Nombre</label>
      <input type="text" class="form-control" id="name" placeholder="Montserrat">

      <button type="button" onclick="start('adjustement')" id="startAdjustement" class="btn btn-primary">Iniciar ajuste
        del modelo</button>
      <button type="button" onclick="start('perception')" id="startPerception" class="btn btn-success">Iniciar
        percepción</nav></button>
      <button type="button" onclick="imagery()" id="startImagery" class="btn btn-info">Iniciar imaginería
        mental</button>
      <img id="flip" class="flip" src="">
      <div class="center" id="text"></div>
    </div>
  </div>

  <script>

    var labelDataFile = "id_del_sujeto_label.dat";
    var signalDataFile = "id_del_sujeto_signal.dat";
    var bffLabels = "";
    var bffSignal = "";

    var images = [
      { id: 0, img: 'resources/mentalImg/img/carretera.jpeg', text: '000' },
      { id: 1, img: 'resources/mentalImg/img/ciudad.jpg', text: '000' },
      { id: 2, img: 'resources/mentalImg/img/construccion.jpeg', text: '000' },
      { id: 3, img: 'resources/mentalImg/img/fabrica.jpg', text: '000' },
      { id: 4, img: 'resources/mentalImg/img/terreno.jpg', text: '000' },
    ];

    var objects = [
      { id: 0, img: 'resources/mentalImg/img/cereal.jpg', text: 'crl' },
      { id: 1, img: 'resources/mentalImg/img/cocacola.jpg', text: 'coca' },
      { id: 2, img: 'resources/mentalImg/img/galletas.jpg', text: 'gllt' },
      { id: 3, img: 'resources/mentalImg/img/pastillas.jpg', text: 'mdcn' },
      { id: 4, img: 'resources/mentalImg/img/telefono.jpg', text: 'tlfn' },

    ];

    var text = $('#text');
    var flip = $('#flip');
    function start(identifier) {
      var name = document.getElementById("name").value;

      var current = 0;
      var array = [];

      if (identifier == 'adjustement') {
        array = images;
      } else {
        array = objects;
      }

      const interval = setInterval(function () {
        main(current);
        if (current < array.length - 1) {
          current++
        } else {
          clearInterval(interval);
        }
      }, 7000);
      const timer = (ms) => new Promise(resolve => setTimeout(resolve, ms));

      async function main(i) {
        text.text('.');
        //prerun();
        await timer(4000);
        //preseq();
        flip.attr('src', array[i].img);
        flip.show();

        await timer(1600);
        //postseq();
        flip.hide();
        flip.attr('src', '');
        text.text(array[i].text);

        await timer(600);
        text.text('');
      }
    }

  </script>


</body>

</html>